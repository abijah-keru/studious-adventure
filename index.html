<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Google Analytics will be loaded conditionally after consent -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Plan the perfect date in Nairobi. Discover romantic spots, activities, restaurants, cinema, outdoor adventures, and more—curated for memorable experiences.">
    <title>Nairobi - Plan Your Perfect Date</title>
    <!-- Open Graph -->
    <meta property="og:title" content="Nairobi Date Planner – Plan the perfect date in Nairobi">
    <meta property="og:description" content="Discover romantic spots, exciting activities, and unforgettable experiences across Nairobi.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://nairobi-date-planner.example/">
    <meta property="og:image" content="images/og-hero.jpg">
    <meta property="og:image:alt" content="Collage of Nairobi date activities and skyline">
    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Nairobi Date Planner – Plan the perfect date in Nairobi">
    <meta name="twitter:description" content="Discover romantic spots, exciting activities, and unforgettable experiences across Nairobi.">
    <meta name="twitter:image" content="images/og-hero.jpg">
    <link rel="icon" type="image/x-icon" href="images/favicon.ico">
    <link rel="icon" type="image/png" sizes="32x32" href="images/favicon-32x32.png">
    <link rel="apple-touch-icon" href="images/apple-touch-icon.png">
    <link rel="manifest" href="./manifest.json">
    <meta name="theme-color" content="#C1666B">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,500,700,900" rel="stylesheet">
    <link rel="stylesheet" href="listing-master/css/simple-line-icons.css">
    <link rel="stylesheet" href="listing-master/css/themify-icons.css">
    <link rel="stylesheet" href="styles.css">
    
    <!-- Structured Data: WebSite with SearchAction -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebSite",
      "name": "Nairobi Date Planner",
      "url": "https://nairobi-date-planner.example/",
      "potentialAction": {
        "@type": "SearchAction",
        "target": "https://nairobi-date-planner.example/?q={search_term_string}",
        "query-input": "required name=search_term_string"
      }
    }
    </script>
    
    <!-- Structured Data: Organization -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "Organization",
      "name": "Nairobi Date Planner",
      "url": "https://nairobi-date-planner.example/",
      "logo": "https://nairobi-date-planner.example/images/logo.png"
    }
    </script>
    
    <!-- Structured Data: Events list placeholder (to be populated as activities are added) -->
    <script type="application/ld+json" id="events-jsonld">
    {
      "@context": "https://schema.org",
      "@type": "ItemList",
      "itemListElement": []
    }
    </script>
</head>
<body>
    <!-- Skip to main content link for keyboard navigation -->
    <a href="#main-content" class="skip-to-main">Skip to main content</a>
    <header>
        <div class="header-container">
            <div class="logo">
                <a href="index.html">
                    <img src="images/logo.png" alt="Nairobi Date Planner logo" class="logo-img" width="48" height="48">
                </a>
            </div>
            <div id="installBtnContainer" class="install-app-container" style="display: none;">
                <button id="installBtn" class="install-app-btn" aria-label="Install Nairobi Dates app">Install App</button>
                <button id="installBtnDismiss" class="install-app-dismiss" aria-label="Dismiss install prompt" title="Dismiss for 7 days">×</button>
            </div>
            <form class="nav-search-form" onsubmit="handleSearch(event)">
                <label for="searchInput" class="visually-hidden">Search activities</label>
                <span class="nav-search-icon icon-magnifier" aria-hidden="true"></span>
                <input type="text" id="searchInput" name="search" placeholder="Search activities" class="nav-search-input">
            </form>
            <button class="hamburger-menu" id="hamburgerMenu" onclick="toggleMobileMenu()" aria-label="Toggle menu">
                <span></span>
                <span></span>
                <span></span>
            </button>
            <nav id="mainNav">
                <a href="#activities">Activities</a>
                <a href="https://www.thelist.restaurant/categories" target="_blank" rel="noopener noreferrer">Restaurants</a>
                <div class="nav-dropdown">
                    <a href="#" class="nav-dropdown-toggle" onclick="toggleCinemaDropdown(event)">Cinema <span class="dropdown-arrow"></span></a>
                    <div class="nav-dropdown-menu" id="cinemaDropdown">
                        <a href="https://centurycinemax.co.ke/" target="_blank" rel="noopener noreferrer">Century Cinemax</a>
                        <a href="https://mookh.com/store/event/unseen-nairobi-2025" target="_blank" rel="noopener noreferrer">Unseen Nairobi</a>
                    </div>
                </div>
                <div class="nav-dropdown">
                    <a href="#" class="nav-dropdown-toggle" onclick="toggleSkipTownDropdown(event)">Skip Town <span class="dropdown-arrow"></span></a>
                    <div class="nav-dropdown-menu" id="skipTownDropdown">
                        <a href="https://tigoni.life/" target="_blank" rel="noopener noreferrer">Tigoni</a>
                        <a href="camping.html">Camping</a>
                    </div>
                </div>
                <a href="contact.html">Contact Us</a>
            </nav>
        </div>
    </header>

    <main id="main-content">
        <div class="activities-section">
            <!-- Explore Bar: Filter controls -->
            <section class="explore-bar" aria-label="Explore filters">
                                  <div class="explore-inner">
                    <button type="button" class="pill" id="nearMeBtn" data-filter="nearme" aria-pressed="false">Near Me</button>
                    <button type="button" class="pill" id="happeningThisMonthBtn" data-filter="happeningthismonth" aria-pressed="false">This Month</button>
                    <div class="filter-by-dropdown">
                        <button type="button" class="filter-by-btn" id="filterByBtn" onclick="toggleCategoryFilter()" aria-expanded="false" aria-haspopup="true">
                            Filter by <span class="dropdown-arrow"></span>
                        </button>
                        <div class="category-filter-menu" id="categoryFilterMenu" role="menu" style="display:none">
                            <div class="category-filter-list" id="categoryFilterList"></div>
                        </div>
                    </div>
                </div>
            </section>
            <div class="categories-list" id="categoriesList"></div>
        </div>
    </main>

    <footer>
        <div class="footer-container">
            <p>&copy; 2025. All rights reserved. <a href="privacy-settings.html" style="color: #ffffff; text-decoration: none; margin-left: 12px;">Privacy Policy</a></p>
        </div>
    </footer>

    <!-- View All Modal -->
    <div id="viewAllModal" class="modal" style="display: none;">
        <div class="modal-content view-all-modal">
            <div class="modal-header">
                <h2 id="viewAllTitle">View All</h2>
                <button class="modal-close" onclick="closeViewAllModal()" aria-label="Close modal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="view-all-grid" id="viewAllGrid"></div>
            </div>
        </div>
    </div>

    <!-- Cookie Consent Banner -->
    <div id="cookie-banner" style="position:fixed;bottom:0;left:0;right:0;width:100%;max-width:100%;background:#C1666B;color:white;padding:15px;display:none;justify-content:space-between;align-items:center;z-index:10000;flex-wrap:wrap;gap:15px;box-shadow:0 -2px 8px rgba(0,0,0,0.15);">
      <span style="flex:1;min-width:200px;font-size:14px;line-height:1.5;">We use cookies to make NairobiDates smooth and fun. You can accept all, decline, or customize your preferences.</span>
      <div style="display:flex;align-items:center;gap:10px;flex-wrap:wrap;">
        <button id="accept-cookies" style="padding:8px 16px;background:white;color:#C1666B;border:none;border-radius:3px;cursor:pointer;font-weight:500;font-size:14px;white-space:nowrap;">Accept All</button>
        <button id="decline-cookies" style="padding:8px 16px;background:transparent;color:white;border:1px solid white;border-radius:3px;cursor:pointer;font-size:14px;white-space:nowrap;">Decline All</button>
        <a href="privacy-settings.html" style="color:white;text-decoration:underline;font-size:14px;white-space:nowrap;">Manage</a>
      </div>
    </div>
    <style>
      @media (max-width: 768px) {
        #cookie-banner {
          padding: 12px !important;
          gap: 12px !important;
        }
        #cookie-banner span {
          font-size: 13px !important;
          min-width: 100% !important;
          margin-bottom: 8px;
        }
        #cookie-banner > div {
          width: 100%;
          justify-content: flex-start;
        }
      }
    </style>

    <script src="cookie-banner.js"></script>
    <script src="script.js"></script>
</body>
</html>